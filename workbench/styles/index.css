* { margin: 0; padding: 0; box-sizing: border-box; }
html, body, #root { height: 100%; overflow: hidden; }
body {
  background: #1a1a2e;
  color: #e0e0e0;
  font-family: system-ui, -apple-system, sans-serif;
}

.app {
  height: 100%;
  display: flex;
  flex-direction: column;
}

/* --- Tab Bar --- */
.tab-bar {
  display: flex;
  align-items: center;
  background: #16213e;
  border-bottom: 1px solid #0f3460;
  padding: 0 4px;
  flex-shrink: 0;
  height: 36px;
  overflow-x: auto;
}

.tab {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 6px 12px;
  font-size: 13px;
  cursor: pointer;
  border-right: 1px solid #0f3460;
  white-space: nowrap;
  color: #999;
  transition: background 0.15s;
}

.tab:hover { background: #1a2540; }
.tab.active { background: #1a1a2e; color: #e0e0e0; }

.tab-close {
  background: none;
  border: none;
  color: inherit;
  font-size: 14px;
  cursor: pointer;
  padding: 0 2px;
  opacity: 0.5;
  line-height: 1;
}
.tab-close:hover { opacity: 1; color: #e94560; }

.tab-add {
  background: none;
  border: none;
  color: #999;
  font-size: 18px;
  cursor: pointer;
  padding: 4px 12px;
  line-height: 1;
}
.tab-add:hover { color: #e0e0e0; }

/* --- Toolbar --- */
.toolbar {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 6px 12px;
  background: #16213e;
  border-bottom: 1px solid #0f3460;
  flex-shrink: 0;
}

.toolbar button, .save-btn {
  font-family: inherit;
  font-size: 13px;
  background: #0f3460;
  color: #e0e0e0;
  border: 1px solid #533483;
  border-radius: 4px;
  padding: 4px 10px;
  cursor: pointer;
}
.toolbar button:hover { background: #533483; }
.toolbar button.active { background: #e94560; border-color: #e94560; }

.undo-btn {
  margin-left: auto;
  font-family: inherit;
  font-size: 12px;
  background: #5e3a0a;
  border: 1px solid #f59e0b;
  border-radius: 4px;
  padding: 2px 10px;
  color: #f59e0b;
  cursor: pointer;
  white-space: nowrap;
}
.undo-btn:hover:not(:disabled) { background: #7a4c0d; }
.undo-btn:disabled { opacity: 0.35; cursor: default; }

/* --- Panels --- */
.panels {
  flex: 1;
  min-height: 0;
  position: relative;
}

.tab-content {
  position: absolute;
  inset: 0;
  display: flex;
}

/* --- Split Pane --- */
.split-pane {
  display: flex;
  flex: 1;
  min-height: 0;
  width: 100%;
}

.split-left, .split-right {
  overflow: hidden;
  min-width: 0;
}

.split-divider {
  width: 4px;
  background: #0f3460;
  cursor: col-resize;
  flex-shrink: 0;
  transition: background 0.15s;
}
.split-divider:hover { background: #533483; }

/* --- Strudel Panel --- */
.strudel-panel {
  height: 100%;
  display: flex;
  flex-direction: column;
}

.strudel-panel strudel-editor {
  display: none;
}

.strudel-panel strudel-editor + div {
  flex: 1;
  min-height: 0;
  overflow: auto;
  --font-size: 15px;
}

/* --- Terminal Panel --- */
.terminal-panel {
  height: 100%;
  padding: 4px;
}

.terminal-panel .xterm {
  height: 100%;
}

/* --- Status Bar --- */
.status-bar {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 4px 12px;
  background: #16213e;
  border-top: 1px solid #0f3460;
  font-size: 11px;
  flex-shrink: 0;
}

.status-dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  background: #f87171;
}
.status-dot.connected { background: #4ade80; }

.status-text { color: #999; }
.status-hint { color: #666; margin-left: auto; }
.status-track { color: #e0e0e0; }

.share-btn {
  font-family: inherit;
  font-size: 11px;
  background: none;
  border: 1px solid #0f3460;
  border-radius: 3px;
  color: #666;
  padding: 1px 8px;
  cursor: pointer;
}
.share-btn:hover { color: #e0e0e0; border-color: #533483; }

/* --- Share Dialog --- */
.share-dialog {
  background: #16213e;
  border: 1px solid #533483;
  border-radius: 8px;
  width: 500px;
}

.share-dialog-body {
  padding: 12px 16px;
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.share-row {
  display: flex;
  gap: 6px;
}

.share-row input {
  flex: 1;
  min-width: 0;
  font-family: monospace;
  font-size: 12px;
  background: #1a1a2e;
  color: #e0e0e0;
  border: 1px solid #0f3460;
  border-radius: 4px;
  padding: 6px 8px;
  outline: none;
}

.share-row button, .share-shorten-btn {
  font-family: inherit;
  font-size: 13px;
  background: #0f3460;
  color: #e0e0e0;
  border: 1px solid #533483;
  border-radius: 4px;
  padding: 6px 12px;
  cursor: pointer;
  white-space: nowrap;
}
.share-row button:hover, .share-shorten-btn:hover { background: #533483; }
.share-shorten-btn:disabled { opacity: 0.5; cursor: default; }
.share-error { color: #e94560; font-size: 12px; }

/* --- Track Selector --- */
.track-selector-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.6);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 100;
}

.track-selector {
  background: #16213e;
  border: 1px solid #533483;
  border-radius: 8px;
  width: 400px;
  max-height: 500px;
  display: flex;
  flex-direction: column;
}

.track-selector-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 12px 16px;
  border-bottom: 1px solid #0f3460;
  font-weight: 600;
}

.track-selector-header button {
  background: none;
  border: none;
  color: #999;
  font-size: 18px;
  cursor: pointer;
}
.track-selector-header button:hover { color: #e0e0e0; }

.track-selector-create {
  display: flex;
  gap: 6px;
  padding: 8px 12px;
  border-bottom: 1px solid #0f3460;
  flex-wrap: wrap;
}

.track-selector-create input {
  flex: 1;
  min-width: 0;
  font-family: inherit;
  font-size: 13px;
  background: #1a1a2e;
  color: #e0e0e0;
  border: 1px solid #0f3460;
  border-radius: 4px;
  padding: 5px 8px;
  outline: none;
}
.track-selector-create input:focus { border-color: #533483; }

.track-selector-create button {
  font-family: inherit;
  font-size: 13px;
  background: #0f3460;
  color: #e0e0e0;
  border: 1px solid #533483;
  border-radius: 4px;
  padding: 5px 12px;
  cursor: pointer;
}
.track-selector-create button:hover { background: #533483; }

.track-selector-error {
  width: 100%;
  font-size: 12px;
  color: #e94560;
}

.track-selector-list {
  overflow-y: auto;
  padding: 8px;
}

.track-selector-folder {
  display: flex;
  align-items: center;
  gap: 6px;
  width: 100%;
  text-align: left;
  background: none;
  border: none;
  color: #999;
  padding: 6px 12px;
  font-size: 13px;
  cursor: pointer;
  border-radius: 4px;
}
.track-selector-folder:hover { background: #0f3460; color: #e0e0e0; }

.folder-arrow {
  font-size: 10px;
  width: 10px;
  text-align: center;
}

.track-selector-item {
  display: block;
  width: 100%;
  text-align: left;
  background: none;
  border: none;
  color: #e0e0e0;
  padding: 6px 12px;
  font-size: 14px;
  cursor: pointer;
  border-radius: 4px;
}
.track-selector-item:hover { background: #0f3460; }

.track-selector-empty {
  color: #666;
  text-align: center;
  padding: 24px;
}

/* --- Empty State --- */
.empty-state {
  position: absolute;
  inset: 0;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 16px;
  color: #666;
}

.empty-state button {
  font-family: inherit;
  font-size: 14px;
  background: #0f3460;
  color: #e0e0e0;
  border: 1px solid #533483;
  border-radius: 4px;
  padding: 8px 16px;
  cursor: pointer;
}
.empty-state button:hover { background: #533483; }
